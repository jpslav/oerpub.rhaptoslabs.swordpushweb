<metal:use use-macro="base">

    <metal:workflownav fill-slot="workflownav">
    <div id="workflownav-wrap">
        <div id="workflownav-container">
            <div id="forward-steps">
                <input type="button" id="start-from-beginning"
                    class="button forward-button"
                    url="${request.route_url('choose')}"
                    value="Work on another document"
                    title="Return to the home page to create, edit, or adapt more modules">
            </div>
        </div>
    </div>
    </metal:workflownav>

    <metal:content-slot fill-slot="content-slot">
    <div id="ie6-container-wrap">
        <div id="container">
            <div id="content">

                <div id="pageheader-wrap">

                    <div id="module-actions">
                        <span class="advanced">
                            <a class="button" title="Save a ZIP file containing the module's XML and metadata to your local computer." id="download-copy">
                                <span class="advanced-marker"><img src="${images_url}/gear_orange_3.png"/></span>
                                <span class="button-text">Download a copy</span>
                            </a>
                        </span>
                    </div>

                    <div id="page-title">
                        <h1>
                            Success
                        </h1>
                    </div>

                    <p>
                        <span>${'"'+module_title+'"'}</span> was successfully uploaded to Connexions.
                    </p>

                    <p>
                        <span class="highlight">It is not published yet!</span>
                    </p>

                    <p>
                        <span>To publish and share your module:</span>
                    </p>

                    <ol>
                        <tal:requirements repeat="requirement requirements">
                        <li tal:define="email python:requirement.get('email', '');
                                        type python:requirement.get('type', '');
                                        username python:requirement.get('username', '');
                                        loggedin_user python:request.session['username'];
                                        url python:requirement.get('url', '');">
                            <div tal:omit-tag="" tal:condition="(type == 'licence') and (username != loggedin_user)">
                                Your coauthors must agree.<span tal:omit-tag="" tal:condition="email != ''"> (<a href="mailto:${email}">Send them reminder emails.</a>)</span>
                            </div>
                            <div tal:omit-tag="" tal:condition="(type == 'licence') and (username == loggedin_user)">
                                You must <a href="${url}" target="_blank">sign the Open Content License</a> at Connextions and then click "Publish".
                            </div>
                            <div tal:omit-tag="" tal:condition="(type == 'role_request') and (username != loggedin_user)">
                                When your coauthors have agreed and you have signed the license, you can <a href="${url}" target="_blank">publish your module</a> at Connextions.
                            </div>
                        </li>
                        </tal:requirements>
                    </ol>

                </div>
            </div>
        </div>
    </div>
    
    </metal:content-slot>

</metal:use>
