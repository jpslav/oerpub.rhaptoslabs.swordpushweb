<metal:use use-macro="base">
<metal:body metal:fill-slot="content">
    ${form.begin(request.route_url('metadata'))}
    ${form.csrf_token()}
    <table>
        <tr>
            <td colspan="2">
                Use the fields below to describe the file that you are uploading:
            </td>
            <td>Remember?</td>
        </tr>
        <tal:field tal:repeat="field field_list">
        <tr>
            <td colspan="3">
                ${form.errorlist(field[0])}
            </td>
        </tr>
        <tr>
            <td>
                ${form.label(field[0], field[1] + ':')}
            </td>
            <td>
            <tal:textfield tal:condition="len(field) < 3">
            ${form.text(field[0])}
            </tal:textfield>
            <tal:field_dict
                tal:define="field_dict field[2] if len(field) > 2 else {}"
                tal:condition="field_dict">
            <tal:textarea tal:condition="field_dict['type'] == 'textarea'">
            ${form.textarea(field[0])}
            </tal:textarea>
            <tal:checkbox tal:condition="field_dict['type'] == 'checkbox'">
            <tal:checkboxen repeat="value field_dict['values']">
            ${form.checkbox(field[0], value=value, label=value)}
            <br/>
            </tal:checkboxen>
            </tal:checkbox>
            <tal:select tal:condition="field_dict['type'] == 'select'">
            ${form.select(field[0], field_dict['values'])}
            </tal:select>
            </tal:field_dict>
            </td>
            <td align="center">
                ${form.checkbox('keep_%s' % field[0])}
            <td>

            </td>
        </tr>
        </tal:field>
    </table>
    ${form.submit('form.submitted', 'Upload', class_='submit')}
    ${form.end()}
</metal:body>
</metal:use>
