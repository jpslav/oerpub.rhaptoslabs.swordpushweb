<metal:main define-macro="main">
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:tal="http://xml.zope.org/namespaces/tal">
    <head>
        <title>
            <metal:page_title define-slot="page_title">title</metal:page_title>
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="keywords" content="sword upload client connexions" />
        <meta name="description" content="SWORD version 1 upload client for Connexions" />
        <script src="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/jquery-1.6.4.min.js')}"></script>
        <script src="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/swordpush.js')}"></script>
        <link rel="stylesheet" href="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/screen.css')}" type="text/css" media="screen" charset="utf-8" />
        <link rel="stylesheet" href="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/swordpush.css')}" type="text/css" media="screen" charset="utf-8" />
    </head>
    <body>
        <div class="container">
            <div class="span-10" id="header">
                <h1>Word Converter</h1>
            </div>
            <div class="span-14 last large" id="profile">
                <tal:profile tal:condition="'username' in request.session">
                Repository: <span tal:replace="request.session['workspace_title']" tal:condition="'workspace_title' in request.session"/> | User: <span tal:replace="request.session['username']"/> <a href="/logout">sign out</a><br/>
                <table cellspacing="0">
                    <tr>
                        <td>
                Workspace: 
                        </td>
                        <td>
                <form id="workspace-form" method="post" action="/change_workspace">
                    <select id="workspace-changer" name="url" tabindex="1">
                        <option
                        tal:repeat="entry request.session['collections']"
                        tal:condition="'collections' in request.session"
                        tal:content="entry['title']"
                        tal:attributes="value entry['href'];
                        selected 'selected' if entry['href'] == request.session['current_collection'] else None">title</option>
                    </select>
                </form>
                        </td>
                    </tr>
                </table>
                </tal:profile>
                <tal:profile tal:condition="'username' not in request.session">
                    &nbsp;
                </tal:profile>
            </div>
            <div id="recent-files" tal:condition="'username' in request.session">
                <p>Most recent files:</p>
                <ul>
                    <li>Psychology 101</li>
                    <li>Introductory Statistics</li>
                </ul>
            </div>
            <tal:errors tal:define="messages request.session.pop_flash('errors')"
                      tal:condition="messages">
                <div class="error" tal:repeat="message messages">
                    <span tal:replace="message" />
                </div>
            </tal:errors>
            <tal:info tal:define="messages request.session.pop_flash()"
                      tal:condition="messages">
                <div class="info" tal:repeat="message messages">
                    <span tal:replace="message" />
                </div>
            </tal:info>
            <div id="filepicker">
                <metal:filepicker define-slot="filepicker" />
            </div>
            <div class="span-24 last" id="content">
                <metal:content define-slot="content" />
            </div>
            <div id="footer">
                Footer goes here.
            </div>
        </div>
    </body>
</html>
</metal:main>
