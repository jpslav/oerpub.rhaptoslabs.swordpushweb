<metal:use use-macro="base">
<tal:body metal:fill-slot="content">

<script>
function check_submit() {
  passed = true;
  names = ["username", "password"];
  for(i in names) {
    name = names[i];
    x = document.forms["login_form"][name];
    if((x.value == null) || (x.value == "")) {
      x.style.background = '#ffce99';
      passed = false;
    } else {
      x.style.background = '#ffffff';
    }
  }
  return passed;
}
</script>
<div tal:condition="econtext.has_key('login_error')" class="splashboxerror">${econtext.get('login_error', '')}</div>
<div class="splashbox">
  <div class="splashheading">
    <img src="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/images/connexions_icon.png')}" width="51" height="59" align="left"/>
    Connexions Document Importer
  </div>
  <p>You need to sign in to Connexions to use this tool.</p>
  ${form.begin(request.route_url('login'), name='login_form', onsubmit='return check_submit()')}
  ${form.csrf_token()}
  <input type="hidden" name="service_document_url" value="${config['service_document_url']}"/>
  <center>
    <table>
      <tr>
        <td><div class="formlabel"><label for="username">Username&nbsp;&nbsp;</label></div></td>
        <td><div class="formfield"><input type="text" name="username"/></div></td>
      </tr>
      <tr>
        <td><div class="formlabel"><label for="password">Password&nbsp;&nbsp;</label></div></td>
        <td><div class="formfield"><input type="password" name="password"/></div></td>
      </tr>
      <tr>
        <td colspan="2" align="right">${form.submit('form.submitted', 'Log in', class_='submit')}</td>
      </tr>
    </table>
  </center>
  ${form.end()}
  <p>If you do not yet have an account, go to
    <a href="http://cnx.org/join_form">the Connexions site</a>
    to create one.</p>
  <div align="right">
    <a href="http://www.shuttleworthfoundation.org/" target="_blank"><img src="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/images/sf.png')}" width="200"/></a>
  </div>
</div>
</tal:body>
</metal:use>
